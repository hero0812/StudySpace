## 【B】算法 -- 散列表与哈希算法

### SelfCheck

- 怎样理解hash，hash冲突的解决方法
- 输入一个数组，想一种方法让这个数组尽可能的乱序
- [哈希表](https://www.nowcoder.com/jump/super-jump/word?word=哈希表)如何构建，怎么解决哈希冲突。



### 散列技术

顺序表中查找是通过从表头遍历或者二分查找。

而散列表则是在存储位置和关键字之间建立一种对应关系f，这样在查找过程中，只需要通过这个对应关系f找到给定值key的映射f(key)。这种关系f则称为散列函数或哈希函数。

采用散列技术将记录存储在一块连续的存储空间中，这块连续空间称为哈希表。存储地址称为哈希地址或散列地址。



### 哈希算法

##### 哈希算法的定义和原理：

**将任意长度的二进制串映射为固定长度的二进制串。这个映射的规则就是哈希算法。**



##### 哈希算法的原则

计算简单、散列地址分布均匀。



##### 常见的哈希函数构造方法：

| 除留取余法 | f(key) = key mod p (p <= m)                  |                      |
| ---------- | -------------------------------------------- | -------------------- |
| 随机数法   | f(key) = random (key)                        | 当关键字的长度不等时 |
| 折叠法     | 将关键字分成位数相同的几部分                 | 适用于关键字位数很多 |
| 平方取中法 | 先对关键字取平方，然后选取中间几位为哈希地址 |                      |





#### 哈希冲突与解决办法

鸽巢原理说的是如果有10个鸽巢，有11个鸽子，那肯定有1个鸽巢中的鸽子数量多于一个。同理，

哈希算法产生的哈希值的长度是固定且有限的。而要哈希的数据是无限的。所以哈希冲突不可避免。

常见的解决哈希冲突办法 ：**开放寻地法**、**链表（拉链）法**、再哈希法、建立公共溢出区。



##### 1.开放寻地法

一旦发生了冲突就去寻找下一个空的哈希地址，只要哈希表足够大，空的散列地址总能找到，并将记录存入。

应用：Java中 ThreadLocalMap



##### 2.链表法

将所有关键字为同义字的记录存储在一个单链表中，我们称这种单链表为同义词子表，散列表中存储同义词子表的头指针。

![这里写图片描述](/Users/zhanghongxi/ABP-study/StudySpace/images/SouthEast.png)

应用：HashMap中解决哈希冲突使用了开发地址法和链表法。





##### 3.再哈希法

就是同时构造多个不同的哈希函数。当发生冲突时，使用不同的哈希函数计算地址，直到不冲突为止。这种方法不易产生堆积，但是耗费时间。



##### 4.建立公共溢出区

将哈希表分为**基础表**和**溢出表**。

将所有关键字通过哈希函数计算出相应的地址。然后将未发生冲突的关键字放入相应的基础表中，一旦发生冲突，就将其依次放入溢出表中即可。

在查找时，先用给定值通过哈希函数计算出相应的散列地址后，首先 首先与**基本表**的相应位置进行比较，如果不相等，再到**溢出表中顺序查找**。



#### 哈希算法的应用

1. 安全加密

   MD5与SHA算法等

2. 应用二：唯一标识

3. 应用三：数据校验

4. 应用四：散列函数

   相对于其他几种应用，散列函数对于散列算法冲突的要求要低很多。只要散列冲突不是过于严重，可以通过**开放寻地法**或者**链表法**解决。

   



### 学习资源

- 极客时间 -- 数据结构与算法之美 - 王铮

- 解决哈希冲突的常用方法分析

  https://www.jianshu.com/p/4d3cb99d7580





































